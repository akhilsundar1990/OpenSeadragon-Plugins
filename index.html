<!DOCTYPE html>
  <html>
    <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />




    <title>Openseadragon-plugins by dgutman</title>
    
    <style>

      /*
       generated by gh-pages
       original h color #cf9;
      */
      /*body {
          margin:     0;
          color:          #333;
          font-family: Helvetica, Arial, FreeSans, san-serif;
          background-color: #121621;/*#0e182e;*/
      }*/
      #container {
          margin:     0 auto;
          width:      960px;
          padding:    1.0em;
          background-color: #EEE; 

      }
      div noscript{
          text-align:center;
      }
      noscript p{
          position: absolute;
          z-index: 99;
          color: red;
          text-align: center;
          width: 800px;
      }

      h1 { font-size: 3.8em; color: #700; margin: 0 3px 0.5em 3px; }
      h1 .small { font-size: 0.4em; }
      h1 a { text-decoration: none }
      h1 .version {
          font-size: 16px;
          margin-left: 4px;
      }
      h1 .tagline {
          font-size: 12px;
          float: left;
          margin-top: 5px;
          margin-left: 10px;
      }
      h2 { 
          font-size: 1.5em; 
          color: #437AB2; 
          text-align: left; 
          border-top: 2px dotted #aaa;
          padding: 1em 0 0 1em;
      }
      h3 { 
          font-size: 1.1em; 
          color: #800; 
          text-align: center;
          border-top: 1px dotted #999;
          padding-top: 1em;
      }
      ul h3 { text-align: left;}
      ul { list-style: none; padding: 0px 4em; }

      ul ul, 
      .square-list {
          list-style: square
      }

      a { color: #800; }

      p { padding: 0 1.5em; }

      .elevator {
          font-size: 1.2em;
          margin: 2em 5em;
          font-style: italic;
      }
      .description {
          font-size: 1.2em;
          margin: 2em 5em;
          font-style: italic;
          padding-bottom: 1em;
          border-bottom: 1px dotted #999;
          clear: both;
      }
      .description h3 {
          margin-bottom: 0;
      }
      .description p {
          margin-bottom: 0;
      }
      .download { float: right; }
      .navigation{
          border-left: 1px dotted #999;
          float: right;
          width: 200px;
          clear: both;
          margin: 20px;
      }
      .navigation ul{
          margin: 0 0 0 25px;
          padding: 10px;
          list-style: square;
          
      }
      .navigation ul li{
          margin-bottom: 5px;
      }
      .demoarea{
          clear: both;
      }
      .license ul.copyrights{
          padding: 0 1.5em;
      }
      .license ul.conditions{
          list-style: square;
      }
      .footer{
          margin: 25px 0 0 0;
          border-top: 2px dotted #aaa;
          padding: 15px 0 0 0;
          text-align: center;
          clear: both;
      }
      .footer li{
          font-size: 12px;
          display: inline;
      }
      .footer li:before{
          content: "| ";
          color: #bbb;
          margin: 0 4px;
      }
      .footer li:first-child:before{
          content: "";
          margin: 0;
      }
      pre { 
          background-color: #F8F8F8;
          border: 1px solid #CCC;
          font-size: 13px;
          line-height: 19px;
          overflow: auto;
          padding: 6px 10px;
          border-radius: 3px;
          color: #333;
          width: auto;
      }
      hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}

      /*
       from openseadragon demos
       */
      .openseadragon
      {
          width:      800px;
          height:     600px;
          border:     1px solid black;
          color:      #333; /* text color for messages */
          background-color: black;
      }
      .openseadragon-small
      {
          width:      40px;
          height:     30px;
          border:     1px solid black;
          color:      #333; /* text color for messages */
          background-color: black;
      }
      .demoheading {
          color: #437AB2; 
          padding: 0 0 0.2em 1em;
      }
      .toolbar
      {
          width:      800px;
          height:     33px;
          border:     none;
          color:      #333;
          padding:    4px;
          background-color: transparent;
      }
      .toolbar.fullpage{
          width:      100%;
          border:     none;
          position:   fixed;
          z-index:    999999;
          left:       0;
          top:        0;
          background-color: #ccc;
      }

      table.for-examples {
          margin-left: 20px;
          border-collapse: collapse;
      }

      table.for-examples td {
          border: 1px dotted #999;
          padding: 10px;
      }

      ol.for-examples {
          margin-left: 20px;
      }

      ol.for-examples li {
          margin: 0.5em 0;
      }
    </style>

	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
	<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css" />
	<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
	

      <script src="http://openseadragon.github.io//openseadragon/openseadragon.min.js"></script>
      <script src="js/image_controls.js"></script>
      
    </head>
      <body>
        <header>
          <div class="container">
          <h1>Openseadragon-plugins</h1>
          <h2>A utility library that provides a number of extras to the Seadragon AJAX viewer</h2>
            <section id="downloads">
            <a href="https://github.com/dgutman/OpenSeadragon-Plugins/zipball/master" class="btn">Download as .zip</a>
            <a href="https://github.com/dgutman/OpenSeadragon-Plugins/tarball/master" class="btn">Download as .tar.gz</a>
            <a href="https://github.com/dgutman/OpenSeadragon-Plugins" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
          </section>
        </div>
      </header>
        <div class="container">
          <section id="main_content">
          <h3>
          <a name="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages"><span class="octicon octicon-link"></span></a>Welcome to GitHub Pages.</h3>
          <p>
          Below are some examples of an annotation plugin developed to allow overlays in OpenSeadragon.<br>
	</p>
	<h2>Example #1</h2>
	<p>
	In this example, the initial gray image is pre-render to Red using an SVG color filter, I select the openseadragon canvas contained within the singleChan_contentDiv
	<pre><code>
	$('#redChan_contentDiv .openseadragon-canvas').css('-webkit-filter','url(#f_to_red)')

	</code></pre>
	

	   Additional code demonstrates
          dynamic filtering of images using <i>client</i> side filters-- which are quick and allow neat effects
              <div class="demoheading">
              OpenSeadragon Viewer With Gray Channel Converted to Red
              <span id='consolelog'></span>
            </div>

	

	<!---	<div id="example_1_ctrl_region">
		</div>
	<input type="button" id="show_filter" value="Apply Filters" class="btn" >
			</div>
       			-->
            <div id="redChan_contentDiv" class="openseadragon"></div>
         

          <script type="text/javascript">
          // Example
          OpenSeadragon({
          id:              "redChan_contentDiv",
          prefixUrl:       "http://openseadragon.github.io/openseadragon/images/",
          tileSources:     "Example_TileSources/GreenChannel.dzi"
          });

	$('#redChan_contentDiv .openseadragon-canvas').css('-webkit-filter','url(#f_to_red)');
	 function updateFilters() {
                        //http://www.html5rocks.com/en/tutorials/filters/understanding-css/
                        console.log(flt);
                            var css = 'contrast(' + flt.contrast + '%) brightness(' + flt.brightness + '%) url(#f_to_red) hue-rotate(' + flt.hue_rotate + 'deg) saturate(' + flt.saturate + '%)';
                            $('.openseadragon-canvas').css('-webkit-filter', css);
                            //$("#filtered").css('-webkit-filter', 'url(filter.svg.php?deg=' + flt.hue_rotate+'&contrast='+flt.contrast+'&saturate='+flt.saturate+'&blur=' + flt.blur+'&inv=' + flt.invert +'#f0)');
                    }


                    var flt = {};
                    function changeFilter(filter, val, spanItem) {
                        flt[filter] = val;
                        $(spanItem).html(val);
                        updateFilters();
                    }



	//This block of code initializes the cnotrollers to change colors
	   $(document).ready(function() {
	 //create the filter dialog  as a model
                        $("#filter_dialog").dialog({autoOpen: false, width: 'auto'});
                        //Filter dialog only opens on click....
                        $('#show_filter').click(function() {
                            $('#filter_dialog').dialog('open');
                            return false;
                        });
			//updateFilters();



		//This code will set the click handlers for the changing of the color buttons
		$('#chng_paint_color button').click(function() { 
				console.log('Changing color of main image to '+this.id);
			console.log(this.id);
			if(this.id=='red') { $('#dynColor_contentDiv .openseadragon-canvas').css('-webkit-filter','url(#f_to_red)')    }
			else if (this.id=='green') { $('#dynColor_contentDiv .openseadragon-canvas').css('-webkit-filter','url(#f_to_green)') }
			else if (this.id=='blue') { $('#dynColor_contentDiv .openseadragon-canvas').css('-webkit-filter','url(#f_to_blue)') }
			});
			
		});
	
	</script>

	<h2>MultiChannel Div with Dynamic Color</h2>
	<p> This is similar to above, but I added controls that allow me to pick the base color for the channel
	</p>
		 <div id="multicolor_image_controls">
		 <div id="chng_paint_color" class="btn-group paint_color" data-toggle="buttons-radio">
                                        <button id="red"    type="button"    class="btn btn-primary"><div style="border:10px solid red"></div></button>
                                        <button id="green"  type="button"    class="btn btn-primary"><div style="border:10px solid green"></div></button>
                                        <button id="blue"   type="button"    class="btn btn-primary"><div style="border:10px solid blue"></div></button>
                                </div>

                               <span id="cur_color_span">Current Color: <span id="cur_color" ></span>  </span>

		</div>

            <div id="dynColor_contentDiv" class="openseadragon"></div>
          <script type="text/javascript">
          // Example
          OpenSeadragon({
          id:              "dynColor_contentDiv",
          prefixUrl:       "http://openseadragon.github.io/openseadragon/images/",
          tileSources:     "Example_TileSources/GreenChannel.dzi"
          });
          </script>



	<a name="authors-and-contributors" class="anchor" href="#authors-and-contributors"><span class="octicon octicon-link"></span></a>Authors and Contributors</h3>
        <p>This code has been developed by David A Gutman (<a href="https://github.com/dgutman" class="user-mention">@dgutman</a>),
        , Jake Cobb @jcobb and Rich Stoner</p>
        </p>
        <h3>
        <a name="support-or-contact" class="anchor" href="#support-or-contact"><span class="octicon octicon-link"></span></a>Support or Contact</h3>
        <p>Having trouble with Pages? Check out the documentation at <a href="http://help.github.com/pages">
        http://help.github.com/pages</a> or contact <a href="mailto:support@github.com">support@github.com</a>
        and we’ll help you sort it out.</p>
      </section>
    </div>
    
    
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
    <defs>
   
     <filter id="f_to_red">
      <feColorMatrix type="matrix" values="1 0.0 1 0 0  -1 0 0 0 0  -0.5 -0.5 0 0 0  0 0 0 1 0" />
            </filter>
     <filter id="f_to_blue">
      <feColorMatrix type="matrix" values="-0.5 -0.5 0 0 0 -1 0 0 0 0  1 0.0 1 0 0     0 0 0 1 0" />
            </filter>

     <filter id="f_to_green">
      <feColorMatrix type="matrix" values="-0.5 -0.5 0 0 0   1 0.0 1 0 0  -1 0 0 0 0    0 0 0 1 0" />
            </filter>


    </defs>
   
  </svg>



      <div id="filter_dialog" title="Apply Filters">
            Filter set will appear here
            <div style="width:200px">contrast (<a href=# onclick="$('#set_contrast').val(100);
                        $('#set_contrast').change();
                        return false">reset</a>)</div>
            <input id=set_contrast type=range min=0 max=300 value=100 onchange="changeFilter('contrast', this.value, $(this).next())"> <span>100</span>%
            <script>flt.contrast = 100;</script>
            <br>

            <div style="width:200px">brightness (<a href=# onclick="$('#set_brightness').val(100);
                        $('#set_brightness').change();
                        return false">reset</a>)</div>
            <input id=set_brightness type=range min=-100 max=100 value=0 onchange="changeFilter('brightness', this.value, $(this).next())"> <span>100</span>%
            <script>flt.brightness = 100;</script>
            <br>
            <div style="width:200px">saturate (<a href=# onclick="$('#set_saturate').val(100);
                        $('#set_saturate').change();
                        return false">reset</a>)</div>
            <input id=set_saturate type=range min=0 max=700 value=100 onchange="changeFilter('saturate', this.value, $(this).next())"> <span>100</span>%
            <script>flt.saturate = 100;</script>
            <br>

            <div style="width:200px">hue-rotate (<a href=# onclick="$('#set_hue_rotate').val(0);
                        $('#set_hue_rotate').change();
                        return false">reset</a>)</div>
            <input id=set_hue_rotate type=range min=0 max=360 value=0 onchange="changeFilter('hue_rotate', this.value, $(this).next())"> <span>0</span>deg
            <script>flt.hue_rotate = 0;</script>
            <br>
            <div style="width:200px">invert (<a href=# onclick="$('#set_invert').val(0);
                        $('#set_invert').change();
                        return false">reset</a>)</div>
            <input id=set_invert type=range min=0 max=100 value=0 onchange="changeFilter('invert', this.value, $(this).next())"> <span>0</span>%
            <script>flt.invert = 0;</script>
            <br>

            <div style="width:200px">blur (<a href=# onclick="$('#set_blur').val(0);
                        $('#set_blur').change();
                        return false">reset</a>)</div>
            <input id=set_blur type=range min=0 max=10 value=0 onchange="changeFilter('blur', this.value, $(this).next())"> <span>0</span>px
            <script>flt.blur = 0;</script>
            <br>

        </div>

    <!-- $('#wsi_paint_color button').click(function() {
                $('#wsi_paint_color button').addClass('active').not(this).removeClass('active');
                annotationState.lineColor = colourNameToHex(this.id);
                $("#cur_color").css('background-color', colourNameToHex(this.id));
        });
  $('#wsi_paint_color button').removeClass('active'); // remove all active
                                                                                                                // buttons... although
                                                                                                                // maybe just setting
                                                                                                                // the button does it
        selector_string = "#wsi_paint_color #" + color; // selects the button based
                                                                                                        // on color...
        $(selector_string).addClass('active');
        // $('#wsi_paint_color
        // button').addClass('active').not(this).removeClass('active');
        annotationState.lineColor = colourNameToHex(color);
        $("#cur_color").css('background-color', colourNameToHex(color));

        /* TO DO: ADD RETURN CODE AND CHECK FOR INVALID COLORS */
	}


-->

  </body>
</html>
